
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Lecture du fichier annual-number-of-deaths-by-cause.csv
```{r}
library(tidyverse)

annualdeath <- read.csv("../Dataset/annual-number-of-deaths-by-cause.csv", header = TRUE)
governmentEducationExpenditure  <- read.csv("../Dataset/total-government-expenditure-on-education-gdp.csv", header = TRUE)
enrolment_ratio_teritiary_education <- read.csv("../Dataset/enrolment-ratio-teritiary-education.csv", header = TRUE)
```

enlever les régions
```{r}
library(dplyr)
annualdeath <- annualdeath %>% filter(Code != "");
governmentEducationExpenditure <- governmentEducationExpenditure  %>% filter(Code != "");

```
changer le nom des colonnes
```{r}
colnames(annualdeath) <- c("Country","Code","Year","Meningitis","Alzheimers disease","Parkinsons disease","Nutritional deficiencies","Malaria",
"Drowning","Interpersonal violence", "Maternal disorders", "HIV AIDS" , "Drug use disorders", "Tuberculosis", "Cardiovascular diseases", "Lower respiratory infections", "Neonatal disorders","Alcohol use disorders", "Self harm", "Exposure to forces of nature", "Diarrheal diseases", "Environmental heat and cold exposure", "Neoplasms", "Conflict and terrorism", "Diabetes mellitus", "Chronic kidney disease", "Poisonings", "Protein energy malnutrition", "Road injuries", "Chronic respiratory diseases", "Cirrhosis and other chronic liver diseases", "Digestive diseases","Fire heat and hot substances","Acute hepatitis", "Measles"
)
colnames(governmentEducationExpenditure) <- c("Country","Code","Year","Percent of GPD spent in Education")

colnames(enrolment_ratio_teritiary_education) <- c("Country","Year","Gender","Age", "Units", "Enrolment ration (%)")
```
supprimer les colonnes inutiles
drug use ?, drowing ?, hiv aids ?
```{r}

annualdeath <- select(annualdeath,-Code, -`Interpersonal violence`, -`Fire heat and hot substances`, -`Road injuries`, -`Conflict and terrorism`, -`Exposure to forces of nature`, -`Self harm` )

governmentEducationExpenditure <- select(governmentEducationExpenditure, -Code)

enrolment_ratio_teritiary_education <- select(enrolment_ratio_teritiary_education, -Units, -Age,)

```

connaitre les pays que l'on observera pas
```{r}
pays_non_observés_annual_death <- annualdeath %>% group_by(Country) %>% filter(n() < 5)
pays_non_observés_annual_death <- pays_non_observés_annual_death %>% group_by(Country) %>% count()


pays_non_observés_government_exp <- governmentEducationExpenditure %>% group_by(Country) %>% filter(n() < 5)
pays_non_observés_government_exp <- pays_non_observés_government_exp %>% group_by(Country) %>% count()

pays_non_observés_enrolment_ratio_teritiary_education <- enrolment_ratio_teritiary_education %>% group_by(Country) %>% filter(n() < 5)
pays_non_observés_enrolment_ratio_teritiary_education <- pays_non_observés_enrolment_ratio_teritiary_education  %>% group_by(Country) %>% count()

print(pays_non_observés_government_exp)
print(pays_non_observés_annual_death)
print(pays_non_observés_enrolment_ratio_teritiary_education)
```
On a 30 pays non observés pour la table government expenditure, 0 pour annual death et 2 pour enrolment ratio

Filter seuleument les données de 1990 à 2010

```{r}
annualdeath <- annualdeath %>% filter(Year<2011);

governmentEducationExpenditure <- governmentEducationExpenditure  %>% filter(Year<2011) %>%filter(Year>1989);

enrolment_ratio_teritiary_education <- enrolment_ratio_teritiary_education  %>% filter(Year<2011) %>%filter(Year>1989)  %>%filter(Gender == "All genders") ;
```

enlever les pays ayant moins de 20% et la colonne "World"
```{r}
governmentEducationExpenditure <- governmentEducationExpenditure %>% group_by(Country) %>% filter(n() > 5) %>% filter(Country != "World")

annualdeath <- annualdeath %>% group_by(Country) %>% filter(n() > 5) %>% filter(Country != "World")

enrolment_ratio_teritiary_education <- enrolment_ratio_teritiary_education %>% group_by(Country) %>% filter(n() > 5)
```
nombre d'observations par pays en 20 ans
```{r}
governmentEducationExpenditure %>% group_by(Country)%>%count()

annualdeath %>% group_by(Country)%>%count()

enrolment_ratio_teritiary_education %>% group_by(Country)%>%count()
```

nombre de pays observés
```{r}
governmentEducationExpenditure %>% group_by(Country)%>%summarise() %>% nrow()
annualdeath  %>% group_by(Country)%>%summarise() %>% nrow()
```

nuage de points 
```{r}
# Tracer le nuage de points
plot(`Percent of GPD spent in Education` ~ Year, data = governmentEducationExpenditure,
     main = "Dépenses gouvernementales en éducation par pays",   # Titre du graphique
     xlab = "Année",                                           # Étiquette de l'axe X
     ylab = "Pourcentage du PIB dépensé en éducation",         # Étiquette de l'axe Y
     col = as.numeric(factor(Country)),                        # Couleur différente pour chaque pays
     pch = 16,                                                  # Type de marqueur (cercle plein)
     xlim = c(min(Year), max(Year)),                           # Limites de l'axe X
     ylim = c(0, max(`Percent of GPD spent in Education`)))     # Limites de l'axe Y

# Enregistrer les marges actuelles
anciennes_marges <- par("mar")

# Définir de nouvelles marges avec plus d'espace en bas
par(mar = c(anciennes_marges[1:3], 5))

# Placer la légende sous le graphique
legend("bottom", legend = levels(factor(governmentEducationExpenditure$Country)), 
       col = 1:length(levels(factor(governmentEducationExpenditure$Country))), pch = 16, bty = "n", 
       cex = 0.7, inset = c(0, -0.2)) # Ajuster la marge verticale pour déplacer la légende vers le bas

```


```{r}

```